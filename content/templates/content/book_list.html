{% extends "base.html" %}
{% load static %}
{% load clean_html %}

{% block title %}{{ master|capfirst }} â€¢ Books{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6">
  <h1 class="page-title text-white text-center">
      {{ master|capfirst }} : {{ content_type|capfirst }}s 
  </h1>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    {% for item in items %}

      <div class="card bg-[#4d2323] rounded-lg overflow-hidden shadow-sm flex flex-col h-full" id="item-{{ item.id }}">
        <!-- Fixed height section for title & author -->
        <div class="flex flex-col items-center justify-center text-center h-[5.5rem] overflow-hidden">
          <a href="{{ item.get_absolute_url }}"
            class="text-yellow-300 text-lg no-underline leading-snug line-clamp-2">
            {{ item.title }}
          </a>
          {% if item.author %}
            <p class="text-white text-sm mt-1 line-clamp-1">{{ item.author }}</p>
          {% endif %}
        </div>
        {% if item.image %}
          <img src="{{ item.image.url }}" alt="{{ item.title }}"
               class="w-full h-64 md:h-80 lg:h-96 object-contain rounded-t-lg"
               loading="lazy">
        {% endif %}

        <!-- Beautiful buy buttons -->
        <div class="mt-6 flex flex-col sm:flex-row justify-center gap-4 text-center">

          {% if item.amazon_buy_link %}
            <a href="{{ item.amazon_buy_link }}"
              class="bg-gradient-to-r from-yellow-400 to-yellow-600 text-black font-semibold px-4 py-2 rounded-full shadow hover:from-yellow-500 hover:to-yellow-700 transition">
              Amazon
            </a>
          {% else %}
            <a href="{{ item.flipkart_buy_link }}"
              class="bg-gradient-to-r from-yellow-400 to-yellow-600 text-black font-semibold px-4 py-2 rounded-full shadow hover:from-yellow-500 hover:to-yellow-700 transition">
              Amazon
            </a>
          {% endif %}

          {% if item.flipkart_buy_link %}
            <a href="{{ item.flipkart_buy_link }}"
              class="bg-gradient-to-r from-blue-400 to-blue-600 text-white font-semibold px-4 py-2 rounded-full shadow hover:from-blue-500 hover:to-blue-700 transition">
              Flipkart
            </a>
          {% else %}
            <a href="{{ item.amazon_buy_link }}"
              class="bg-gradient-to-r from-blue-400 to-blue-600 text-white font-semibold px-4 py-2 rounded-full shadow hover:from-blue-500 hover:to-blue-700 transition">
              Flipkart
            </a>
          {% endif %}

        </div>
      </div>
    {% empty %}
      <p class="text-center text-white">
        No books available for {{ master|capfirst }} yet.
      </p>
    {% endfor %}
  </div>
</div>
{% endblock %}
