{% extends "base.html" %}
{% load static %}
{% load clean_html %}


{# Page <title> and headline show the chosen master and type #}
{% block title %}{{ master|capfirst }} {{ content_type|capfirst }}{% endblock %}

{% block content %}

<div class="container">
  <h1 class="page-title text-white text-center">
      {{ master|capfirst }} : {{ content_type|capfirst }}s 
  </h1>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

    {% for item in items %}
      <div class="card" id="item-{{ item.id }}">
        <a href="{{ item.get_absolute_url }}">
          {% if item.image %}
            <img src="{{ item.image.url }}" alt="{{ item.title }}"
                 class="w-full h-64 md:h-80 lg:h-96 object-cover rounded-t-lg">
          {% endif %}
          <h2 class="card-title text-yellow-300 text-center">
            <a href="{{ item.get_absolute_url }}" class="text-yellow-300 no-underline">{{ item.title }}</a>
          </h2>

          {# Show a short preview of description/content with cleaned HTML #}
          {% if item.description %}
            <div class="mb-4 text-justify prose prose-white max-w-none">
              {{ item.description|clean_html|truncatewords:0|safe }}
            </div>
          {% elif item.content %}
            <div class="card-excerpt text-justify prose prose-white max-w-none">
              {{ item.content|clean_html|truncatewords:0|safe }}
            </div>
          {% endif %}
        </a>
      </div>
    {% empty %}
      <p class="text-center text-white">
        No {{ content_type }}s available for {{ master|capfirst }} yet.
      </p>
    {% endfor %}

  </div>
</div>
{% endblock %}
